{"filter":false,"title":"ownerships_controller.rb","tooltip":"/monolist/app/controllers/ownerships_controller.rb","undoManager":{"mark":0,"position":0,"stack":[[{"start":{"row":0,"column":0},"end":{"row":7,"column":0},"action":"remove","lines":["class OwnershipsController < ApplicationController","  def create","  end","","  def destroy","  end","end",""],"id":2},{"start":{"row":0,"column":0},"end":{"row":31,"column":3},"action":"insert","lines":["class OwnershipsController < ApplicationController","  def create","    @item = Item.find_or_initialize_by(code: params[:item_code])","","    unless @item.persisted?","      # @item が保存されていない場合、先に @item を保存する","      results = RakutenWebService::Ichiba::Item.search(itemCode: @item.code)","","      @item = Item.new(read(results.first))","      @item.save","    end","","    # Want 関係として保存","    if params[:type] == 'Want'","      current_user.want(@item)","      flash[:success] = '商品を Want しました。'","    end","","    redirect_back(fallback_location: root_path)","  end","","  def destroy","    @item = Item.find(params[:item_id])","","    if params[:type] == 'Want'","      current_user.unwant(@item) ","      flash[:success] = '商品の Want を解除しました。'","    end","","    redirect_back(fallback_location: root_path)","  end","end"]}]]},"ace":{"folds":[],"scrolltop":43,"scrollleft":0,"selection":{"start":{"row":31,"column":3},"end":{"row":31,"column":3},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":1,"state":"start","mode":"ace/mode/ruby"}},"timestamp":1538996009328,"hash":"0cc53619a7adbcf49bba512ce2d01afe00e335ff"}